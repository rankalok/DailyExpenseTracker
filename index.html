<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßæ Daily Expense Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>üßæ Daily Expense Tracker</h1>
            <nav>
                <button id="addExpenseTab" class="nav-btn active">üì• Add Expense</button>
                <button id="addMultipleTab" class="nav-btn">üìã Add Multiple</button>
                <button id="listExpensesTab" class="nav-btn">üìÑ List Expenses</button>
                <button id="settingsTab" class="nav-btn">‚öôÔ∏è Settings</button>
            </nav>
        </header>

        <!-- Add Expense Page -->
        <div id="addExpensePage" class="page active">
            <div class="form-container">
                <h2>Add New Expense</h2>
                <form id="expenseForm">
                    <div class="form-group">
                        <label for="expenseDate">
                            <i class="fas fa-calendar"></i> Date
                        </label>
                        
                        <!-- Quick Date Selection Buttons -->
                        <div class="quick-date-buttons">
                            <button type="button" class="btn-quick-date" id="todayBtn">Today</button>
                            <button type="button" class="btn-quick-date" id="yesterdayBtn">Yesterday</button>
                            <button type="button" class="btn-quick-date" id="lastMonthBtn">Last Month</button>
                            <button type="button" class="btn-quick-date" id="customDateBtn">Custom</button>
                        </div>
                        
                        <input type="date" id="expenseDate" required>
                        <input type="text" id="expenseDateDisplay" class="date-display" readonly placeholder="Select date above">
                        <small class="format-hint">Format: dd-MMM-YYYY | Quick select: Today, Yesterday, or Last Month</small>
                    </div>

                    <div class="form-group">
                        <label for="expenseAmount">
                            <i class="fas fa-rupee-sign"></i> Amount
                        </label>
                        <input type="number" id="expenseAmount" step="0.01" min="0" placeholder="0.00" required>
                    </div>

                    <div class="form-group">
                        <label for="expenseDescription">
                            <i class="fas fa-edit"></i> Description
                        </label>
                        <input type="text" id="expenseDescription" maxlength="200" placeholder="Enter expense description" required>
                        <small class="char-count">0/200 characters</small>
                    </div>

                    <div class="form-group">
                        <label for="expenseLabel">
                            <i class="fas fa-tags"></i> Label
                        </label>
                        
                        <!-- Dynamic Quick Label Selection Buttons -->
                        <div class="quick-label-buttons" id="quickLabelContainer">
                            <!-- Dynamically populated based on current month's most used labels -->
                        </div>
                        
                        <input type="text" id="expenseLabel" list="labelSuggestions" placeholder="Select or enter label" required>
                        <datalist id="labelSuggestions"></datalist>
                        <small class="format-hint">Quick select: Most used labels this month | Type for more options</small>
                    </div>

                    <div class="form-group">
                        <label for="paymentOption">
                            <i class="fas fa-credit-card"></i> Payment Option
                        </label>
                        
                        <!-- Dynamic Quick Payment Option Selection Buttons -->
                        <div class="quick-payment-buttons" id="quickPaymentContainer">
                            <!-- Dynamically populated based on current month's most used payment options -->
                        </div>
                        
                        <input type="text" id="paymentOption" list="paymentSuggestions" placeholder="Select or enter payment method" required>
                        <datalist id="paymentSuggestions"></datalist>
                        <small class="format-hint">Quick select: Most used payments this month | Type for more options</small>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Add Expense
                        </button>
                        <button type="button" id="clearForm" class="btn btn-secondary">
                            <i class="fas fa-eraser"></i> Clear
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Add Multiple Expenses Page -->
        <div id="addMultiplePage" class="page">
            <div class="multi-expense-container">
                <div class="multi-expense-header">
                    <h2>üìã Add Multiple Expenses</h2>
                    <div class="header-actions">
                        <button type="button" id="addMultiRowBtn" class="btn btn-add-row">
                            <i class="fas fa-plus"></i> Add Row
                        </button>
                        <button type="button" id="saveAllExpensesBtn" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save All Expenses
                        </button>
                        <button type="button" id="clearAllMultiRowsBtn" class="btn btn-secondary">
                            <i class="fas fa-trash"></i> Clear All
                        </button>
                    </div>
                </div>

                <!-- Multi-Expense Table -->
                <div class="multi-expense-table-container">
                    <table id="multiExpenseTable" class="multi-expense-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Amount</th>
                                <th>Description</th>
                                <th>Label</th>
                                <th>Payment Option</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="multiExpenseTableBody">
                            <!-- Dynamic rows will be added here -->
                        </tbody>
                    </table>
                </div>

                <!-- Summary Section -->
                <div class="multi-expense-summary">
                    <div class="summary-stats">
                        <span class="total-rows">Total Rows: <strong id="totalRowCount">0</strong></span>
                        <span class="total-amount">Total Amount: ‚Çπ<strong id="multiTotalAmount">0.00</strong></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- List Expenses Page -->
        <div id="listExpensesPage" class="page">
            <div class="list-container">
                <div class="list-header">
                    <h2>Expenses for <span id="currentMonth"></span></h2>
                    <div class="header-controls">
                        <div class="month-navigation">
                            <button id="prevMonth" class="btn btn-nav">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span id="displayMonth"></span>
                            <button id="nextMonth" class="btn btn-nav">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="file-operations">
                            <div class="download-section">
                                <button id="downloadCSV" class="btn btn-download">
                                    <i class="fas fa-download"></i> Download CSV
                                </button>
                                <button id="downloadTXT" class="btn btn-download">
                                    <i class="fas fa-file-text"></i> Download TXT
                                </button>
                            </div>
                            <div class="upload-section">
                                <input type="file" id="fileInput" accept=".csv,.txt" style="display: none;">
                                <button id="loadFile" class="btn btn-upload">
                                    <i class="fas fa-upload"></i> Load File
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Expense Entries Table -->
                <div class="table-section">
                    <h3>üìã Expense Entries</h3>
                    <div class="table-container">
                        <table id="expenseTable">
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Date</th>
                                    <th>Amount</th>
                                    <th>Description</th>
                                    <th>Label</th>
                                    <th>Payment Option</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="expenseTableBody">
                                <!-- Expenses will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    <div class="table-summary">
                        <strong>Total Expenses: ‚Çπ<span id="totalAmount">0.00</span></strong>
                    </div>
                </div>

                <!-- Summary by Label -->
                <div class="table-section">
                    <h3>üè∑Ô∏è Summary by Label</h3>
                    <div class="table-container">
                        <table id="labelSummaryTable">
                            <thead>
                                <tr>
                                    <th>Label</th>
                                    <th>Total Amount</th>
                                    <th>Percentage</th>
                                </tr>
                            </thead>
                            <tbody id="labelSummaryBody">
                                <!-- Label summary will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Summary by Payment Option -->
                <div class="table-section">
                    <h3>üí≥ Summary by Payment Option</h3>
                    <div class="table-container">
                        <table id="paymentSummaryTable">
                            <thead>
                                <tr>
                                    <th>Payment Option</th>
                                    <th>Total Amount</th>
                                    <th>Percentage</th>
                                </tr>
                            </thead>
                            <tbody id="paymentSummaryBody">
                                <!-- Payment summary will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div id="settingsPage" class="page">
            <div class="settings-container">
                <h2>‚öôÔ∏è Settings</h2>
                
                <!-- Labels Management Section -->
                <div class="settings-section">
                    <h3>üè∑Ô∏è Manage Labels</h3>
                    <div class="settings-controls">
                        <div class="add-item-form">
                            <input type="text" id="newLabel" placeholder="Enter new label" maxlength="50">
                            <button id="addLabel" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Label
                            </button>
                        </div>
                    </div>
                    <div class="items-list">
                        <div id="labelsList" class="items-grid">
                            <!-- Labels will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Payment Options Management Section -->
                <div class="settings-section">
                    <h3>üí≥ Manage Payment Options</h3>
                    <div class="settings-controls">
                        <div class="add-item-form">
                            <input type="text" id="newPaymentOption" placeholder="Enter new payment option" maxlength="50">
                            <button id="addPaymentOption" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Payment Option
                            </button>
                        </div>
                    </div>
                    <div class="items-list">
                        <div id="paymentOptionsList" class="items-grid">
                            <!-- Payment options will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Reset Section -->
                <div class="settings-section">
                    <h3>üîÑ Reset Options</h3>
                    <div class="reset-controls">
                        <button id="resetLabels" class="btn btn-warning">
                            <i class="fas fa-undo"></i> Reset Labels to Default
                        </button>
                        <button id="resetPaymentOptions" class="btn btn-warning">
                            <i class="fas fa-undo"></i> Reset Payment Options to Default
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Expense Modal -->
        <div id="editModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-edit"></i> Edit Expense</h3>
                    <button class="close-modal" id="closeEditModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="editExpenseForm">
                    <div class="form-group">
                        <label for="editExpenseDate">
                            <i class="fas fa-calendar"></i> Date
                        </label>
                        <input type="date" id="editExpenseDate" required>
                    </div>

                    <div class="form-group">
                        <label for="editExpenseAmount">
                            <i class="fas fa-rupee-sign"></i> Amount
                        </label>
                        <input type="number" id="editExpenseAmount" step="0.01" min="0" required>
                    </div>

                    <div class="form-group">
                        <label for="editExpenseDescription">
                            <i class="fas fa-edit"></i> Description
                        </label>
                        <input type="text" id="editExpenseDescription" maxlength="200" required>
                        <small class="edit-char-count">0/200 characters</small>
                    </div>

                    <div class="form-group">
                        <label for="editExpenseLabel">
                            <i class="fas fa-tags"></i> Label
                        </label>
                        <input type="text" id="editExpenseLabel" list="labelSuggestions" required>
                    </div>

                    <div class="form-group">
                        <label for="editPaymentOption">
                            <i class="fas fa-credit-card"></i> Payment Option
                        </label>
                        <input type="text" id="editPaymentOption" list="paymentSuggestions" required>
                    </div>

                    <div class="modal-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update Expense
                        </button>
                        <button type="button" id="cancelEdit" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Success/Error Messages -->
        <div id="messageContainer" class="message-container"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>